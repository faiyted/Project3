<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Project3</title>
  <link rel="stylesheet" href="../style.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col-md-12 p-5 text-center bg-light">
        <h1>Remote Work & Mental Health Dashboard</h1>
      </div>
    </div>
    <div class="row p-3">
      <div>
        <h5 class="text-center">Industry Insights and the relationships with mental health, regions, and work locations.</h5>
      </div>
    </div>
    <div class="row">
      <div class="filters-container">
        <div class="filter-row d-flex justify-content-around">
          <div>
            <label for="regionFilter">Region:</label>
            <select id="regionFilter">
              <option value="">All Regions</option>
            </select>
          </div>

          <div>
            <label for="workLocationFilter">Work Location:</label>
            <select id="workLocationFilter">
              <option value="">All Work Locations</option>
            </select>
          </div>

          <div>
            <label for="healthConditionFilter">Mental Health Condition:</label>
            <select id="healthConditionFilter">
              <option value="">All Conditions</option>
            </select>
          </div>
        </div>
      </div>

      <div id="chart"></div>
    </div>

    <br><br><br>
    <div id="barChart" style="width: 100%;"></div>
    <div id="summary" style="margin-top: 20px; text-align: center;">
      <b>Summary</b><br>
      Satisfaction is slightly higher for onsite workers compared to hybrid and remote.<br>
      Remote work has a lower satisfaction rate, with higher percentages in the Neutral and Unsatisfied categories.<br>
      Hybrid work shows a fairly even distribution, with no dominant satisfaction level, which might suggest that hybrid work arrangements cater to a wide range of experiences.
    </div>
    
    <!-- Adding your three graphs -->
    <br><br><br>
    <!-- 1. Bar chart (Access to Mental Health Resources) -->
    <div id="myBarChart" style="width: 100%; height: 600px;"></div>

    <!-- 2. Stacked bar chart -->
    <div id="stacked-bar-chart" style="width: 100%; height: 600px;"></div>

    <!-- 3. 3D Scatter Plot -->
    <div id="scatter-3d-chart" style="width: 100%; height: 600px;"></div>

    <script src="static/script.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <script>
      // Render your custom bar chart here
      function renderCustomBarChart() {
        const categories = ['Anxiety', 'Depression', 'None'];
        const access_yes = {
          'None': [10, 20, 15],   
          'Weekly': [30, 15, 20], 
          'Daily': [10, 5, 5]
        };
        const access_no = {
          'None': [5, 10, 5],    
          'Weekly': [20, 5, 5],  
          'Daily': [5, 5, 5]
        };

        // Bar chart data
        const data = [
          {
            x: categories,
            y: access_yes['None'],
            name: 'Access: Yes, No Activity',
            type: 'bar',
            marker: { color: 'skyblue' }
          },
          {
            x: categories,
            y: access_yes['Weekly'],
            name: 'Access: Yes, Weekly Activity',
            type: 'bar',
            marker: { color: 'lightgreen' }
          },
          {
            x: categories,
            y: access_yes['Daily'],
            name: 'Access: Yes, Daily Activity',
            type: 'bar',
            marker: { color: 'lightcoral' }
          },
          {
            x: categories,
            y: access_no['None'],
            name: 'Access: No, No Activity',
            type: 'bar',
            marker: { color: 'salmon' }
          },
          {
            x: categories,
            y: access_no['Weekly'],
            name: 'Access: No, Weekly Activity',
            type: 'bar',
            marker: { color: 'orange' }
          },
          {
            x: categories,
            y: access_no['Daily'],
            name: 'Access: No, Daily Activity',
            type: 'bar',
            marker: { color: 'purple' }
          }
        ];

        const layout = {
          title: 'Access to Mental Health Resources and Physical Activity by Mental Health Condition',
          barmode: 'group',
          xaxis: { title: 'Mental Health Condition' },
          yaxis: { title: 'Percentage (%)' }
        };

        Plotly.newPlot('myBarChart', data, layout);
      }

      renderCustomBarChart();

      // Render stacked bar chart for physical activity vs. sleep quality
      function renderStackedBarChartForPhysicalActivity() {
        const physicalActivityLevels = ['None', 'Weekly', 'Daily'];
        const poorCounts = [10, 15, 5];
        const averageCounts = [20, 25, 10];
        const goodCounts = [30, 20, 15];

        const trace1 = {
          x: physicalActivityLevels,
          y: poorCounts,
          name: 'Poor',
          type: 'bar',
          marker: { color: 'red' }
        };

        const trace2 = {
          x: physicalActivityLevels,
          y: averageCounts,
          name: 'Average',
          type: 'bar',
          marker: { color: 'orange' }
        };

        const trace3 = {
          x: physicalActivityLevels,
          y: goodCounts,
          name: 'Good',
          type: 'bar',
          marker: { color: 'green' }
        };

        const data = [trace1, trace2, trace3];

        const layout = {
          title: 'Physical Activity vs Sleep Quality',
          barmode: 'stack',
          xaxis: { title: 'Physical Activity' },
          yaxis: { title: 'Number of People' }
        };

        Plotly.newPlot('stacked-bar-chart', data, layout);
      }

      renderStackedBarChartForPhysicalActivity();

      // Render 3D scatter plot
      function render3DScatterPlot() {
        const hoursWorked = [40, 50, 60, 40, 50, 60, 40, 50, 60];
        const virtualMeetings = [3, 3, 3, 5, 5, 5, 7, 7, 7];
        const stressLevels = [5, 10, 15, 10, 15, 20, 15, 10, 5];

        const maxStress = Math.max(...stressLevels);
        const percentages = stressLevels.map(level => (level / maxStress) * 100);

        const trace = {
          x: hoursWorked,
          y: virtualMeetings,
          z: stressLevels,
          mode: 'markers',
          marker: {
            size: 12,
            color: stressLevels,
            colorscale: 'Viridis',
            colorbar: {
              title: 'Stress Level'
            }
          },
          text: percentages.map(p => `${p.toFixed(1)}%`),
          type: 'scatter3d'
        };

        const data = [trace];

        const layout = {
          title: '3D Scatter Plot of Stress Levels by Hours Worked and Virtual Meetings',
          scene: {
            xaxis: { title: 'Hours Worked' },
            yaxis: { title: 'Virtual Meetings' },
            zaxis: { title: 'Stress Level' }
          }
        };

        Plotly.newPlot('scatter-3d-chart', data, layout);
      }

      render3DScatterPlot();
    </script>
</body>

</html>




